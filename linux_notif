#!/bin/bash

# --- 1. Definisikan Variabel ---
FOLDER="$HOME/.Update1"
URL="https://wps-pclevel.blogspot.com/2025/12/cara-update-linux-dashboard-v1.html?m=1"
APP_NAME="System Update"

# --- 2. Periksa Kondisi (Folder TIDAK ADA) ---
# Menggunakan operator negasi (!) pada -d (direktori ada)
if [ ! -d "$FOLDER" ]; then
    
    # 3. Kirim Notifikasi
    # Notifikasi dikirimkan dengan tombol 'Lihat Detail' (action ID: detail_action)
    /usr/bin/notify-send \
        --app-name="$APP_NAME" \
        --icon=dialog-information \
        --action=detail_action='Klik notif untuk cara update' \
        --expire-time=30000 \
        "Update Tersedia" \
        "TERMUX DASHBOARD V.1"
        
    echo "Notifikasi 'Update Tersedia' telah dikirim."

    # Keterbatasan: 
    # Skrip shell tidak dapat secara pasif menunggu user mengklik notifikasi.
    # Perintah untuk membuka URL harus dipicu oleh sistem notifikasi itu sendiri
    # (melalui D-Bus) atau dijalankan segera di sini.

    # 4. Solusi Praktis (Membuka URL SEGERA)
    # Jika Anda ingin link terbuka segera setelah notifikasi muncul (bukan saat di klik), 
    # hapus tanda '#' di baris di bawah ini:
    xdg-open "$URL" & 
    
else
    # Folder ada, tidak ada notifikasi yang ditampilkan
    echo "System Update âœ…"
fi
